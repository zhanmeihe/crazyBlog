"use strict";function slogonDisplay(){var t=["澶у鏁颁汉鎯宠鏀归€犺繖涓笘鐣岋紝浣嗗嵈缃曟湁浜烘兂鏀归€犺嚜宸便€�","褰撲綘灏戒簡鑷繁鐨勬渶澶у姫鍔涙椂锛屽け璐ヤ篃鏄紵澶х殑銆�","鍙湁涓€鏉¤矾涓嶈兘閫夋嫨鈥斺€旈偅灏辨槸鏀惧純鐨勮矾;鍙湁涓€鏉¤矾涓嶈兘鎷掔粷鈥斺€旈偅灏辨槸鎴愰暱鐨勮矾銆�","椹鹃┉鍛借繍鐨勮埖鏄鏂椼€備笉鎶辨湁涓€涓濆够鎯筹紝涓嶆斁寮冧竴鐐规満浼氾紝涓嶅仠姝竴鏃ュ姫鍔涖€�","鎴愬姛涓庝笉鎴愬姛涔嬮棿鏈夋椂璺濈寰堢煭鈥斺€斿彧瑕佸悗鑰呭啀鍚戝墠鍑犳銆�","鑻ヤ笉缁欒嚜宸辫闄愶紝鍒欎汉鐢熶腑灏辨病鏈夐檺鍒朵綘鍙戞尌鐨勮棭绡便€�","浜虹敓閲嶈鐨勪笉鏄墍绔欑殑浣嶇疆锛岃€屾槸鎵€鏈濈殑鏂瑰悜銆�","骞冲嚒鐨勮剼姝ヤ篃鍙互璧板畬浼熷ぇ鐨勮绋嬨€�","鏋勬垚鎴戜滑瀛︿範鏈€澶ч殰纰嶇殑鏄凡鐭ョ殑涓滆タ锛岃€屼笉鏄湭鐭ョ殑涓滆タ銆�","鎴愬姛鐨勪汉鏄窡鍒汉瀛︿範缁忛獙锛屽け璐ョ殑浜哄彧璺熻嚜宸卞涔犵粡楠屻€�"],i=Math.floor(Math.random()*t.length);$("#dev-slogon").html(t[i])}function passwordRecommend(){var t=$(".re_password"),i=$(".re_password_again"),s=$(".sys_pwd_wapper"),e=$("#sys_pwd"),u=randomPassword(9);e.html(u),t.on("focus",function(){s.show()}),i.on("focus",function(){s.show()}),e.on("click",function(){t.val(u),i.val(u),t.trigger("blur"),i.trigger("blur")})}function randomPassword(t){for(var i=[["A","B","C","D","E","F","G","H","I","J","K","L","M","N","P","Q","R","S","T","U","V","W","X","Y","Z"],["a","b","c","d","e","f","g","h","i","j","k","m","n","p","q","r","s","t","u","v","w","x","y","z"],["~","_","@","#","$","&","!","%","^","*","-","=","+"]],s=i[0][Math.floor(Math.random()*i[0].length)]+i[1][Math.floor(Math.random()*i[1].length)]+i[2][Math.floor(Math.random()*i[2].length)],e=new Array("A","B","C","D","E","F","G","H","I","J","K","L","M","N","P","Q","R","S","T","U","V","W","X","Y","Z","a","b","c","d","e","f","g","h","i","j","k","m","n","p","q","r","s","t","u","v","w","x","y","z","2","3","4","5","6","7","8","9"),u=e.length,r="",n=0;n<t;n++){r+=e[Math.floor(Math.random()*u)]}return s+r}$(function(){var t={switch:function(){$(".check").each(function(){$(this).on("click",function(){$(this).find("span").toggleClass("already")})})},registInit:function(){if("undefined"!=typeof okcalsses||"undefined"!=typeof errclass){if(okcalsses.length>0)for(var t=0;t<okcalsses.length;t++)this.rightInit($("."+okcalsses[t])),$("."+okcalsses[t]).get(0).isSubmit=!0;""==errclass&&"undefined"==errclass||("userName"==errclass?this.errInit():"iphone"==errclass?this.errInit():"re_email"==errclass?this.errInit():"re_password"==errclass&&this.errInit())}},errInit:function(){$("."+errclass).addClass("red_border").siblings(".error_tips").show().find("span").html(errmsg)},rightInit:function(t){t.removeClass("red_border").siblings(".error_tips").hide().end().next(".right_icon").show()},register:function(){function t(t){!function(){var t=$("#mobile").val();if(w=1,""==t)return i(f,"璇疯緭鍏ユ墜鏈哄彿鐮�"),void(w=0);if(!C.mobile.test(t))i(f,S.mobile.msg),w=0}(),w?function(){$("#J_getCode").hide(),$("#J_second").html("60"),$("#J_resetCode").show(),$("#J_resetCode").attr("disabled","disabled");var t=60,i=null;i=setInterval(function(){(t-=1)>0?$("#J_second").html(t):(clearInterval(i),$("#J_getCode").show(),$("#J_resetCode").hide())},1e3)}():$("#phone").focus()}function i(t,i){t.addClass("error_red"),$(".offi_tips").show().html(i)}function s(t,i){t.addClass("veri_err"),$(".veri_tips").show().html(i)}function e(t,i){$(t).addClass("blue_border").removeClass("red_border").parent().find(".error_tips").show().addClass("blank_tips").find("span").html(i)}function u(t,i){t.addClass("red_border").removeClass("blue_border").parent().find(".error_tips").show().removeClass("blank_tips").find("span").html(i),t.next(".right_icon").hide()}function r(t){t.removeClass("blue_border red_border").next(".right_icon").show().end().parent().find(".error_tips").hide()}function n(t){return/^\s+$/.test(t.value)}function o(t){return/\d{8}/.test(t.value)}function F(t,i){var s=!1;return $(t).find("input").each(function(t,e){var u=$(e);if(!u.hasClass(i)&&"hidden"!=u.attr("type")){if(!e.isSubmit)return s=!1,!1;s=!0}}),window.SMSdk&&SMSdk.getDeviceId&&$("#fkid").val(SMSdk.getDeviceId()),s}var a=$(".iphone"),l=$(".userName"),m=$(".re_email"),d=$(".re_password"),h=$(".re_password_again"),c=$("#form1"),f=$("#mobile"),g=$("#validateCode"),b=$(".offi_tips"),p=$("#step1Form"),v=$(".get_code"),D=$(".pc_inpt"),x=$("#PcForm"),_=!1,C={mobile:/^1[0-9]{10}$/,userName:/^[a-zA-Z0-9_]{6,20}$/,nickName:/^[a-zA-Z]{1,30}$/,email:/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i,password:{letter:/[a-zA-Z]+/,letterUpper:/[A-Z]+/,digit:/\d+/,symbol:/([^\w\s]+|_+)/}},S={success:{msg:""},empty:{msg:"内容不能为空!"},mobile:{msg:"鎵嬫満鍙锋牸寮忎笉姝ｇ‘"},hasMobile:{msg:"璇ユ墜鏈哄彿宸茬粡琚敞鍐�"},validateCode:{msg:"楠岃瘉鐮佽緭鍏ヤ笉姝ｇ‘"},userError:{msg:"鐢ㄦ埛鍚嶆牸寮忎笉姝ｇ‘!"},hasUser:{msg:"璇ョ敤鎴峰悕宸茬粡琚敞鍐�!"},emailError:{msg:"閭鏍煎紡涓嶆纭�!"},hasEmail:{msg:"閭宸茬粡琚敞鍐屼簡!"},passwordStrength:{msg:"瀵嗙爜寮哄害涓嶅,闀垮害11-20涓瓧绗�,蹇呴』鍖呭惈瀛楁瘝鍜屾暟瀛�",1:"浣�",2:"涓�",3:"楂�"},passwordError:{msg:"涓ゆ杈撳叆涓嶄竴鑷达紝璇烽噸鏂拌緭鍏�."},prompt:{msg:"6锝�20涓瓧绗︼紝鏀寔瀛楁瘝銆佹暟瀛楀拰鈥淿鈥濇牸寮忥紝闇€瀛楁瘝寮€澶�"},pwless:{msg:"瀵嗙爜闀垮害杩囩煭锛岃閲嶆柊杈撳叆."},overPasswordMaxLength:{msg:"瀵嗙爜闀垮害瓒呰繃20浣嶏紝璇烽噸鏂拌緭鍏�."}};f.on("blur",function(){var t=this,s=$(this);""==this.value?(i($(this),S.empty.msg),this.isSubmit=!1):C.mobile.test(this.value)?$.getJSON(CFG.API_URL+"account/mobileregister?action=validateMobile&mobile="+this.value,function(e){0==e.err?(s.removeClass("error_red"),b.hide(),t.isSubmit=!0):(i(s,e.msg),t.isSubmit=!1)}):(i($(this),S.mobile.msg),this.isSubmit=!1)}),g.on("blur",function(){var t=$(this);""==this.value?(i($(this),S.empty.msg),this.isSubmit=!1):o(this)?(t.removeClass("error_red"),b.hide(),this.isSubmit=!0):(i($(this),S.validateCode.msg),this.isSubmit=!1)}),v.on("click",function(){t(),$.getJSON(CFG.API_URL+"account/mobileregister?action=sendMobileCode&mobile="+$("#mobile").val(),function(t){0==t.err?$(".offi_tips").hide():$(".offi_tips").show().html(t.msg)})});var w=1;D.on("blur",function(){var t=$(this);""==this.value?(s($(this),S.empty.msg),this.isSubmit=!1):o(this)?(t.removeClass("veri_err"),$(".veri_tips").hide(),this.isSubmit=!0):(s($(this),S.validateCode.msg),this.isSubmit=!1)}),a.on("focus",function(){e(this,"璇疯緭鍏ユ偍鐨勬墜鏈哄彿锛�")}),a.on("blur",function(){var t=$(this);""==a.val()?(u(t,S.empty.msg),this.isSubmit=!1):C.mobile.test(a.val())?(r(t),this.isSubmit=!0):(u(t,S.mobile.msg),this.isSubmit=!1)}),l.on("focus",function(){e(this,S.prompt.msg)}),l.on("blur",function(){var t=this,i=$(this);n(this)||""==this.value?(u(i,S.empty.msg),this.isSubmit=!1):!function(t){return/^[a-zA-Z0-9_]{6,20}$/.test(t.value)}(this)?(u(i,S.userError.msg),this.isSubmit=!1):$.getJSON(CFG.API_URL+"account/mobileregister?action=validateUsername&username="+this.value,function(s){0==s.err?(r(i),t.isSubmit=!0):(u(i,s.msg),t.isSubmit=!1)})}),m.on("focus",function(){e(this,"璇疯緭鍏ユ偍鐨勯偖绠憋紒")}),m.on("blur",function(){var t=this,i=$(this);n(this)||""==this.value?(u(i,S.empty.msg),this.isSubmit=!1):(this.value=function(t){return t.value=t.value.replace(/^\s+|\s+$/g,""),t.value}(this),!function(t){return/^((([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+(\.([a-z]|\d|[!#\$%&'\*\+\-\/=\?\^_`{\|}~]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])+)*)|((\x22)((((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(([\x01-\x08\x0b\x0c\x0e-\x1f\x7f]|\x21|[\x23-\x5b]|[\x5d-\x7e]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(\\([\x01-\x09\x0b\x0c\x0d-\x7f]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]))))*(((\x20|\x09)*(\x0d\x0a))?(\x20|\x09)+)?(\x22)))@((([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|\d|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))\.)+(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])|(([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])([a-z]|\d|-|\.|_|~|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])*([a-z]|[\u00A0-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF])))$/i.test(t.value)}(this)?(u(i,S.emailError.msg),this.isSubmit=!1):$.getJSON(CFG.API_URL+"account/mobileregister?action=validateEmail&email="+this.value,function(s){0==s.err?(r(i),t.isSubmit=!0):(u(i,s.msg),t.isSubmit=!1)}))}),d.on("focus",function(){e(this,S.passwordStrength.msg)}),d.on("blur",function(){var t=$.trim(d.val()),i=$(this);""==t?(u(i,S.empty.msg),this.isSubmit=!1):t.length<11?(u(i,S.pwless.msg),this.isSubmit=!1):t.length>20?(u(i,S.overPasswordMaxLength.msg),this.isSubmit=!1):C.password.letter.test(t)&&C.password.digit.test(t)&&(r(i),this.isSubmit=!0)}),h.on("focus",function(){e(this,S.passwordStrength.msg)}),h.on("blur",function(){var t=$.trim(h.val()),i=$(this);""==t?(u(i,S.empty.msg),this.isSubmit=!1):t!=$.trim(d.val())?(u(i,S.passwordError.msg),this.isSubmit=!1):(r(i),this.isSubmit=!0)}),$("#pcSec").on("click",function(){var t=!0;""==D.val()?(s(D,S.empty.msg),t=!1):o(D.get(0))?(D.removeClass("veri_err"),$(".veri_tips").hide(),t&&x.submit()):(s(D,S.validateCode.msg),t=!1)}),x.on("submit",function(){var t=F("#PcForm","next_step");if(!t){$(this).find("input").filter("input[type!=submit][type!=hidden]").each(function(t,i){""==i.value&&s($(this),S.empty.msg)})}return t}),$("#next_step").on("click",function(){var t=CFG.API_URL+"account/mobileregister?action=validateMobile&mobile="+$("#mobile").val(),s=!0;$.getJSON(t,{val:f.val()}).done(function(t){parseInt(t.err)>0?(i(f,t.msg),s=!1):(f.removeClass("error_red"),b.hide(),s&&p.submit())})}),p.on("submit",function(){var t=F("#step1Form","next_step");if(!t){$(this).find("input").filter("input[type!=submit][type!=hidden]").each(function(t,s){""==s.value&&i($(this),S.empty.msg)})}return t}),c.on("submit",function(){var t=F("#form1","regist");if(t){if(_)return!1;_=!0}else{$(this).find("input").filter("input[type!=submit][type!=hidden]").each(function(t,i){""==i.value&&u($(this),S.empty.msg)})}return t})}};t.switch(),t.registInit(),t.register(),slogonDisplay(),passwordRecommend()});